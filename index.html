<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acto 1: El Dilema de las Vistas Imperfectas</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" crossorigin="anonymous">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" crossorigin="anonymous"></script>
</head>
<body>
    <!-- Progress Indicator -->
    <div class="progress-indicator" id="progress-indicator">
        <!-- Dots will be added by JS -->
    </div>

    <!-- Navigation Hint -->
    <div class="nav-hint">Usa ‚Üê ‚Üí o scroll para navegar</div>

    <main>
        <!-- ========================================
             SLIDE 1: Hero + Stats
             ======================================== -->
        <section class="slide slide-1" data-slide="1">
            <div class="slide-center">
                <h1 class="hero-title">Acto 1: El Dilema de las Vistas Imperfectas</h1>

                <p class="hero-intro">
                    En los sistemas recomendadores, uno de los mayores desaf√≠os es la <strong>escasez de datos</strong> (sparse supervision).
                </p>

                <div class="stats-large">
                    <div class="stat-card observed">
                        <div class="stat-number">~1%</div>
                        <div class="stat-label">Datos Observados</div>
                    </div>
                    <div class="stat-divider">vs</div>
                    <div class="stat-card unknown">
                        <div class="stat-number">99%</div>
                        <div class="stat-label">Desconocidos</div>
                    </div>
                </div>

                <p class="hero-detail">
                    Tenemos <span class="highlight">millones</span> de posibles interacciones usuario-√≠tem,
                    pero solo observamos una <span class="highlight">m√≠nima fracci√≥n</span>.
                </p>
            </div>
        </section>

        <!-- ========================================
             SLIDE 2: Problema + Matriz
             ======================================== -->
        <section class="slide slide-2" data-slide="2">
            <div class="slide-center">
                <h2 class="slide-title">El Problema: Demasiadas Inc√≥gnitas</h2>

                <div class="viz-with-explanation">
                    <div class="explanation-box">
                        <p>
                            Imagina una plataforma con <strong>20 usuarios y 20 pel√≠culas</strong>
                            (400 combinaciones posibles).
                        </p>
                        <p>
                            En realidad, solo observamos <strong>~5 interacciones</strong>
                            (‚âà1% del total). Las otras 395 son un misterio.
                        </p>
                        <div class="legend-horizontal">
                            <div class="legend-item">
                                <div class="legend-box observed"></div>
                                <span>Interacci√≥n Observada</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-box unknown"></div>
                                <span>Desconocido</span>
                            </div>
                        </div>
                    </div>

                    <div id="matrix-viz" class="visualization-container"></div>
                </div>

                <div class="footer-box">
                    <p><strong>El desaf√≠o:</strong> ¬øC√≥mo entrenar un modelo con tan pocas observaciones sin que memorice?</p>
                </div>
            </div>
        </section>

        <!-- ========================================
             SLIDE 3: GCL + Analog√≠a Alex Completa
             ======================================== -->
        <section class="slide slide-3" data-slide="3">
            <div class="slide-center">
                <h2 class="slide-title">La Clave: Aprender la Esencia, No Memorizar</h2>

                <div class="analogy-layout">
                    <div class="analogy-section">
                        <h3 class="analogy-title">üß† La Analog√≠a: Reconociendo a un Amigo</h3>
                        <p class="analogy-intro">
                            Imagina que tu modelo es un beb√© aprendiendo a reconocer a tu amigo "Alex". Le muestras estas fotos:
                        </p>

                        <div id="alex-photos" class="photos-container-large"></div>

                        <div class="controls">
                            <button id="btn-show-essence" class="btn-primary">¬øQu√© aprende el modelo?</button>
                            <button id="btn-reset-essence" class="btn-secondary">Reset</button>
                        </div>
                        <p id="essence-status" class="essence-explanation"></p>
                    </div>

                    <div class="concept-column">
                        <div class="concept-box good">
                            <h3>‚úÖ "Mentira Buena"</h3>
                            <p>
                                Como la foto con bigote de Alex: <strong>altera la vista, pero la esencia es reconocible</strong>.
                                El modelo aprende GENERALIZACI√ìN.
                            </p>
                        </div>

                        <div class="concept-box bad">
                            <div class="concept-visual">
                                <svg viewBox="0 0 120 120" class="concept-face" role="img" aria-label="Alex con los ojos tachados">
                                    <circle cx="60" cy="60" r="52" fill="#fee2e2" stroke="#ef4444" stroke-width="4"></circle>
                                    <line x1="38" y1="42" x2="52" y2="56" stroke="#b91c1c" stroke-width="6" stroke-linecap="round"></line>
                                    <line x1="52" y1="42" x2="38" y2="56" stroke="#b91c1c" stroke-width="6" stroke-linecap="round"></line>
                                    <line x1="68" y1="42" x2="82" y2="56" stroke="#b91c1c" stroke-width="6" stroke-linecap="round"></line>
                                    <line x1="82" y1="42" x2="68" y2="56" stroke="#b91c1c" stroke-width="6" stroke-linecap="round"></line>
                                    <path d="M38 82 Q60 68 82 82" stroke="#991b1b" stroke-width="5" fill="none" stroke-linecap="round"></path>
                                </svg>
                            </div>
                            <h3>‚ùå "Mentira Mala"</h3>
                            <p>
                                Como borrarle los ojos a Alex: <strong>la esencia se destruye</strong>.
                                El modelo aprende patrones falsos.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             SLIDE 4: El Motor InfoNCE
             ======================================== -->
        <section class="slide slide-4" data-slide="4">
            <div class="slide-center">
                <h2 class="slide-title">El Motor: InfoNCE</h2>

                <div class="infonce-intro-box">
                    <p><strong>Optimizaci√≥n:</strong> Descenso de gradiente sobre <span class="tech-term">Œ∏<sub>GNN</sub></span> (par√°metros de la red) para minimizar L<sub>InfoNCE</sub>.</p>
                    <p><strong>Resultado:</strong> Los embeddings <strong>z</strong> que genera la GNN convergen al espacio deseado.</p>
                </div>

                <div class="infonce-section">
                    <div class="infonce-equation">
                        <h3 class="infonce-subtitle">La Funci√≥n de P√©rdida</h3>
                        <div class="formula-intuitive">
                            <div
                                class="formula-render"
                                data-katex="L_{\text{InfoNCE}} = -\log \frac{\operatorname{sim}(z'_i, z''_i)}{\operatorname{sim}(z'_i, z''_i) + \sum_{j \neq i} \operatorname{sim}(z'_i, z''_j)}"
                            >
                                L<sub>InfoNCE</sub> = -log [ sim(z'<sub>i</sub>, z''<sub>i</sub>) / ( sim(z'<sub>i</sub>, z''<sub>i</sub>) + Œ£<sub>j‚â†i</sub> sim(z'<sub>i</sub>, z''<sub>j</sub>) ) ]
                            </div>
                        </div>
                        <div class="formula-context">
                            <p class="context-note"><strong>z'<sub>i</sub>, z''<sub>i</sub></strong> = embeddings del nodo i desde dos vistas aumentadas (par positivo)</p>
                            <p class="context-note"><strong>z''<sub>j</sub></strong> (j‚â†i) = embeddings de otros nodos en el batch (pares negativos)</p>
                        </div>
                        <div class="gradient-context">
                            <p class="gradient-note"><strong>Proceso iterativo:</strong> Œ∏<sub>GNN</sub> ‚Üê Œ∏<sub>GNN</sub> - Œ± ¬∑ ‚àá<sub>Œ∏</sub>L<sub>InfoNCE</sub></p>
                            <p class="gradient-explanation">
                                El gradiente ajusta los pesos de la GNN para que genere embeddings donde:
                                <br>‚Ä¢ <span class="positive-effect">Pares positivos ‚Üí cercanos</span>
                                <br>‚Ä¢ <span class="negative-effect">Pares negativos ‚Üí alejados</span>
                            </p>
                        </div>
                    </div>

                    <div class="infonce-playground">
                        <h3 class="infonce-subtitle">Convergencia Iterativa (Simplificado a 2D)</h3>
                        <div class="iteration-counter">
                            Iteraci√≥n: <span id="iteration-count">0</span> / 50
                        </div>
                        <div id="infonce-space" class="visualization-container infonce-space">
                            <div
                                class="infonce-node anchor"
                                data-role="anchor"
                                data-label="z'_i"
                                data-initial-x="0"
                                data-initial-y="0"
                                data-target-x="0"
                                data-target-y="0"
                            ></div>
                            <div
                                class="infonce-node positive"
                                data-role="positive"
                                data-label="z''_i"
                                data-initial-x="140"
                                data-initial-y="-120"
                                data-target-x="8"
                                data-target-y="-12"
                            ></div>
                            <div
                                class="infonce-node negative"
                                data-role="negative"
                                data-label="z''_j‚ÇÅ"
                                data-initial-x="30"
                                data-initial-y="-20"
                                data-target-x="170"
                                data-target-y="-140"
                            ></div>
                            <div
                                class="infonce-node negative"
                                data-role="negative"
                                data-label="z''_j‚ÇÇ"
                                data-initial-x="-40"
                                data-initial-y="15"
                                data-target-x="-170"
                                data-target-y="50"
                            ></div>
                            <div
                                class="infonce-node negative"
                                data-role="negative"
                                data-label="z''_j‚ÇÉ"
                                data-initial-x="10"
                                data-initial-y="60"
                                data-target-x="120"
                                data-target-y="150"
                            ></div>
                        </div>
                        <div class="infonce-controls">
                            <p class="infonce-annotation">
                                La animaci√≥n muestra <strong>optimizaci√≥n gradual</strong>: en cada iteraci√≥n, el gradiente ‚àá<sub>Œ∏</sub>L empuja los embeddings hacia su configuraci√≥n √≥ptima.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             SLIDE 6: Transici√≥n - El Problema Real
             ======================================== -->
        <section class="slide slide-6" data-slide="6">
            <div class="slide-center">
                <h2 class="slide-title">El Problema: Las "Mentiras Malas"</h2>

                <div class="impact-statement danger">
                    <p>
                        Este mecanismo es poderoso. Pero tiene un <strong>supuesto ingenuo</strong>:
                        asume que las vistas que creamos son "mentiras buenas".
                    </p>
                </div>

                <div class="impact-statement critical">
                    <p>
                        ¬øPero qu√© pasa si son <strong>"mentiras malas"</strong>?
                    </p>
                    <p>
                        ¬øQu√© pasa si, en lugar de ponerle un bigote a Alex, <strong>le borramos los ojos</strong>?
                    </p>
                </div>

                <div class="investigation-box">
                    <h3>üîç Investiguemos a los Sospechosos</h3>
                    <p>
                        Los m√©todos tradicionales tienen dos "sospechosos habituales".
                        Veamos si son inocentes (crean "mentiras buenas") o culpables
                        (crean "mentiras malas" que arruinan las recomendaciones).
                    </p>
                </div>
            </div>
        </section>

        <!-- ========================================
             SLIDE 7: Sospechoso 1 - SGL
             ======================================== -->
        <section class="slide slide-7" data-slide="7">
            <div class="slide-center">
                <h2 class="slide-title">Sospechoso 1: Sabotaje Estructural (SGL)</h2>

                <div class="suspect-layout">
                    <div class="suspect-explanation">
                        <p>
                            El <strong>Aumento de Estructura</strong> elimina conexiones al azar.
                            Pero el dropout aleatorio <strong>no sabe qu√© aristas son vitales</strong>.
                        </p>
                        <p>
                            Puede borrar una conexi√≥n cr√≠tica y, con ello,
                            <strong>la se√±al colaborativa desaparece</strong>.
                        </p>
                        <div class="paper-quote">
                            "Destruye la naturaleza intr√≠nseca del grafo"
                        </div>
                        <p class="conclusion-text">
                            No estamos haciendo el modelo m√°s robusto,
                            <strong>estamos saboteando la se√±al</strong>.
                        </p>
                    </div>

                    <div class="suspect-viz">
                        <div id="graph-viz" class="visualization-container"></div>
                        <div class="controls">
                            <button id="btn-augment" class="btn-primary">Simular Aumento de Estructura</button>
                            <button id="btn-reset-graph" class="btn-secondary">Reset</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             SLIDE 8: Sospechoso 2 - SimGCL
             ======================================== -->
        <section class="slide slide-8" data-slide="8">
            <div class="slide-center">
                <h2 class="slide-title">Sospechoso 2: Confusi√≥n de Identidad (SimGCL)</h2>

                <div class="suspect-layout">
                    <div class="suspect-explanation">
                        <p>
                            El <strong>Aumento de Features</strong> (SimGCL) aplica un ruido de
                            <strong>"talla √∫nica"</strong> a todos los nodos por igual.
                        </p>
                        <p>
                            <strong>El problema:</strong> El Power User apenas lo nota,
                            pero el Usuario Long Tail puede ser empujado a una zona de gustos
                            completamente err√≥nea.
                        </p>
                        <div class="paper-quote">
                            "Ignora las caracter√≠sticas √∫nicas de los nodos"
                        </div>
                        <p class="instruction-text">
                            <strong>Arrastra el slider</strong> y observa c√≥mo el Power User
                            se mantiene estable pero el Long Tail se desplaza.
                        </p>
                    </div>

                    <div class="suspect-viz">
                        <div id="scatter-viz" class="visualization-container"></div>
                        <div class="controls">
                            <button class="btn-icon" id="noise-decrease" aria-label="Disminuir ruido">‚ñº</button>
                            <label for="noise-slider" class="noise-slider-label">
                                Nivel de Ruido (Œµ): <span id="noise-value">0</span>
                                <input type="range" id="noise-slider" min="0" max="100" value="0">
                            </label>
                            <button class="btn-icon" id="noise-increase" aria-label="Aumentar ruido">‚ñ≤</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             SLIDE 9: El Veredicto
             ======================================== -->
        <section class="slide slide-9" data-slide="9">
            <div class="slide-center">
                <h2 class="slide-title">El Veredicto</h2>

                <div class="verdict-statement">
                    <p>
                        Los m√©todos de GCL actuales son <strong>fundamentalmente defectuosos</strong>.
                    </p>
                    <p>
                        O destruyen informaci√≥n estructural (SGL), o aplican ruido uniforme
                        que ignora las caracter√≠sticas de cada nodo (SimGCL).
                    </p>
                </div>

                <h3 class="questions-header">Las Dos Preguntas Cr√≠ticas:</h3>

                <div class="critical-questions-list">
                    <div class="question-card">
                        <span class="q-icon">üí°</span>
                        <p>
                            ¬øPodemos <strong>generar</strong> una vista inteligente
                            que conserve la esencia, en lugar de destruir el grafo?
                        </p>
                    </div>

                    <div class="question-card">
                        <span class="q-icon">üéØ</span>
                        <p>
                            ¬øPodemos aprender un ruido <strong>adaptativo y personalizado</strong>
                            para cada nodo, en lugar de "talla √∫nica"?
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ========================================
             SLIDE 10: La Propuesta - VGCL
             ======================================== -->
        <section class="slide slide-10" data-slide="10">
            <div class="slide-center">
                <h2 class="slide-title">La Propuesta: VGCL</h2>

                <div class="vgcl-main-box">
                    <p class="vgcl-name">
                        <strong>VGCL</strong><br>
                        <span class="vgcl-subtitle">(Variational Graph Contrastive Learning)</span>
                    </p>
                </div>

                <div class="vgcl-explanation">
                    <p>
                        Necesitamos una forma de crear vistas de contraste que sea:
                    </p>
                </div>

                <div class="vgcl-features">
                    <div class="feature-card">
                        <div class="feature-icon">üîß</div>
                        <h3>Respetuosa con la Estructura</h3>
                        <p>
                            En lugar de <strong>destruir</strong> el grafo al azar,
                            <strong>generar</strong> una vista inteligente que conserve la esencia.
                        </p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">üéØ</div>
                        <h3>Adaptativa a Cada Nodo</h3>
                        <p>
                            En lugar de ruido de "talla √∫nica",
                            aprender un ruido <strong>personalizado</strong> para cada nodo.
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="js/main.js"></script>
</body>
</html>
